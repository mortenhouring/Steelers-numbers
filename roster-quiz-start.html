<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Steelers Roster Quiz</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <main id="start-container">
    <h1>Steelers Roster Quiz</h1>
    <div id="status"></div>
    <div id="buttons"></div>
  </main>

  <script>
    // --- Use same CONFIG keys as roster-quiz.js ---
    const CONFIG = {
      STORAGE_KEYS: {
        CURRENT_ROSTER: 'roster-currentRoster',
        TOTAL_QUESTIONS: 'roster-totalQuestions',
        LAST_PLAYER: 'roster-lastPlayer',
        LAST_ANSWER: 'roster-lastAnswer',
        QUESTIONS_ASKED: 'roster-questionsAsked',
        SCORE: 'roster-score'
      }
    };

    const statusDiv = document.getElementById('status');
    const buttonsDiv = document.getElementById('buttons');

    // --- Detect if a game is in progress ---
    const currentRoster = localStorage.getItem(CONFIG.STORAGE_KEYS.CURRENT_ROSTER);
    const totalQ = parseInt(localStorage.getItem(CONFIG.STORAGE_KEYS.TOTAL_QUESTIONS), 10);
    const score = parseInt(localStorage.getItem(CONFIG.STORAGE_KEYS.SCORE), 10) || 0;

    const hasGame = currentRoster && currentRoster !== '[]';

    if (hasGame) {
      const remaining = JSON.parse(currentRoster || '[]').length;
      statusDiv.innerHTML = `
        <p><strong>Game in progress!</strong></p>
        <p>Score: ${score}/${totalQ || 'â€”'}</p>
        <p>Remaining questions: ${remaining}</p>
      `;

      buttonsDiv.innerHTML = `
        <button id="continue-btn">Continue game</button>
        <button id="restart-btn">Start over</button>
      `;

      document.getElementById('continue-btn').addEventListener('click', () => {
        window.location.href = 'roster-quiz.html';
      });

      document.getElementById('restart-btn').addEventListener('click', () => {
        // Clear everything for a clean start
        Object.values(CONFIG.STORAGE_KEYS).forEach(k => localStorage.removeItem(k));
        window.location.href = 'roster-quiz.html';
      });

    } else {
      statusDiv.innerHTML = `<p>No active game.</p>`;
      buttonsDiv.innerHTML = `<button id="start-btn">Start game</button>`;
      document.getElementById('start-btn').addEventListener('click', () => {
        Object.values(CONFIG.STORAGE_KEYS).forEach(k => localStorage.removeItem(k));
        window.location.href = 'roster-quiz.html';
      });
    }
  </script>
</body>
</html>